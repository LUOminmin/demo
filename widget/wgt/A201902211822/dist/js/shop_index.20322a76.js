(function(t){function o(o){for(var s,n,r=o[0],c=o[1],u=o[2],p=0,d=[];p<r.length;p++)n=r[p],a[n]&&d.push(a[n][0]),a[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(o);while(d.length)d.shift()();return i.push.apply(i,u||[]),e()}function e(){for(var t,o=0;o<i.length;o++){for(var e=i[o],s=!0,r=1;r<e.length;r++){var c=e[r];0!==a[c]&&(s=!1)}s&&(i.splice(o--,1),t=n(n.s=e[0]))}return t}var s={},a={shop_index:0},i=[];function n(o){if(s[o])return s[o].exports;var e=s[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=s,n.d=function(t,o,e){n.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,o){if(1&o&&(t=n(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var s in t)n.d(e,s,function(o){return t[o]}.bind(null,s));return e},n.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=o,r=r.slice();for(var u=0;u<r.length;u++)o(r[u]);var l=c;i.push([63,"chunk-vendors","chunk-common"]),e()})({"0ace":function(t,o,e){},"0b6e":function(t,o,e){},"3ab0":function(t,o,e){"use strict";var s=e("4b36"),a=e.n(s);a.a},"4b36":function(t,o,e){},63:function(t,o,e){t.exports=e("caf6")},8475:function(t,o,e){"use strict";var s=e("0ace"),a=e.n(s);a.a},caf6:function(t,o,e){"use strict";e.r(o);e("cadf"),e("551c"),e("f751"),e("097d");var s=e("f499"),a=e.n(s),i=(e("0b6e"),document.body);window.onload=function(){i.addEventListener("touchstart",function(t){var o=t.target;if("effect"===o.getAttribute("data-touch")){o.classList.remove("active-effect");var e=document.createElement("div");e.classList.add("active-handle");var s=t.touches[0],a=o.getBoundingClientRect();if(s&&a){e.style.left=s.clientX-a.left-200+"px",e.style.top=s.clientY-a.top-200+"px",console.log(e.style.left+","+e.style.top),o.normalize();var i=o.lastChild;i?("#text"!==i.nodeName||i.nodeValue.trim()||(i=i.previousSibling),o.insertBefore(e,i),console.log("lastNode")):(console.log("!lastNode"),o.appendChild(e)),setTimeout(function(){o.classList.add("active-effect")},0)}}}),i.addEventListener("touchcancel",function(t){var o=t.target;"effect"===o.getAttribute("data-touch")&&o.classList.remove("active-effect")}),i.addEventListener("touchmove",function(t){var o=t.target;o.getAttribute("data-touch")}),i.addEventListener("touchend",function(t){var o=t.target;if("effect"===o.getAttribute("data-touch")){o.getAttribute("active-effect");setTimeout(function(){var t=o.querySelector(".active-handle");console.log(t),console.log(a()(t)),t&&o.removeChild(t)},100)}})};var n=e("2b0e"),r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"app"}},[e("LoadMore",{ref:"scroll",on:{loadmore:t.getGoodsList}},[e("div",{staticClass:"tab-wrap-background"}),e("div",{staticClass:"commission-data"},[e("SelectTab",{staticClass:"tab color-black-102",attrs:{tabs:t.tabs,isindex:!0},on:{selected:t.getComminssionData}}),e("Commission",{staticClass:"commission",attrs:{data:t.commissionData.total,nounExplain:!0},on:{commissionClick:t.openPage}}),e("div",[e("button",{staticClass:"more-data color-black-102 size-24",on:{click:t.openMoreDataPage}},[t._v("\n          查看更多数据\n        ")])])],1),e("div",{staticClass:"all-order"},[e("button",{on:{click:t.openAllOrderPage}},[t._v("全部提成订单")])]),e("JumpLine",{attrs:{data:t.groupListPageData}}),e("div",{staticClass:"share-button"},[e("button",{staticClass:"ing",on:{click:function(o){return t.openGroupGoodsList(0)}}}),e("button",{staticClass:"prepare",on:{click:function(o){return t.openGroupGoodsList(1)}}})]),t.groupGoodsList.length<=0?e("div",{staticClass:"no_group_list"},[e("span",[t._v("暂无正在拼团商品")])]):t._l(t.groupGoodsList,function(o){return e("div",{key:o.id},[e("p",{staticClass:"group-list-wrap q-1px-b",attrs:{"data-touch":"effect"}},[e("label",[t._v("距活动结束")]),e("CountDown",{staticClass:"count-down",attrs:{time:o[0]}})],1),e("List",{attrs:{list:o},scopedSlots:t._u([{key:"default",fn:function(o){var s=o.item,a=o.index;return[e("GoodsItem",{staticClass:"q-1px-b",attrs:{item:s,index:a},on:{goodsClick:t.openGroupGoodsDetailPage}},[[e("div",{staticClass:"goods-list isgroup-list"},[e("div",[e("ProgressBar",{staticClass:"progress-bar",attrs:{isgroup:!0,barwidth:s.barwidth}}),e("div",{staticClass:"group-percent"},[e("span",[t._v("已抢"+t._s(s.barwidth||0)+"%")])])],1),e("p",{staticClass:"sales-amount"},[t._v("销量 "+t._s(s.salesAmount))]),e("p",{staticClass:"price"},[e("span",{staticClass:"yuan"},[t._v("￥")]),e("label",{staticClass:"final-price"},[t._v(t._s(t._f("trans-price")(s.price)))]),e("span",{staticClass:"normal-price"},[t._v("￥"+t._s(t._f("trans-price")(s.normalPrice)))]),100==s.barwidth?e("span",{staticClass:"commission-price sold-out"},[t._v("已抢完")]):1==s.isRoyalty&&s.ownPrice>=100?e("span",{staticClass:"commission-price isgroup"},[t._v("赚"+t._s(t._f("trans-price-to-int")(s.ownPrice/100))+"元")]):t._e()])])]],2)]}}],null,!0)})],1)}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.goodsList.length>0,expression:"goodsList.length>0"}]},[e("p",{staticClass:"goods-list-wrap"},[e("label",[t._v("导购推广商品")])]),e("List",{staticClass:"goods-list",attrs:{list:t.goodsList},scopedSlots:t._u([{key:"default",fn:function(o){var s=o.item,a=o.index;return[e("GoodsItem",{staticClass:"q-1px-b",attrs:{item:s,index:a},on:{goodsClick:t.openGoodsDetailPage}},[[e("div",{staticClass:"goods-list"},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.coupon,expression:"item.coupon"}]},[e("ProgressBar",{staticClass:"progress-bar",attrs:{isgroup:!1,barwidth:s.barwidth}}),e("div",{staticClass:"group-percent percent"},[e("span",[t._v("已抢"+t._s(s.barwidth||0)+"%")]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.coupon,expression:"item.coupon"}],staticClass:"coupon"},[e("span",[t._v("券"+t._s(t._f("trans-price-to-int")(s.coupon&&s.coupon.price))+"元")]),e("span",[t._v("还剩"+t._s(s.coupon&&s.coupon.remainingNum)+"张")])])])],1),e("p",{staticClass:"sales-amount"},[t._v("销量 "+t._s(s.salesAmount))]),e("p",{staticClass:"price"},[e("span",{staticClass:"yuan"},[t._v("￥")]),e("label",{staticClass:"final-price"},[t._v(t._s(t._f("trans-price")(s.price)))]),e("label",{directives:[{name:"show",rawName:"v-show",value:s.coupon,expression:"item.coupon"}],staticClass:"final-price-title"},[t._v("券后价")]),e("span",{directives:[{name:"show",rawName:"v-show",value:s.ownPrice>=1,expression:"item.ownPrice>=1"}],staticClass:"commission-price"},[t._v("赚"+t._s(t._f("trans-price-to-int")(s.ownPrice))+"元")])])])]],2)]}}])})],1)],2)],1)},c=[],u=e("a3d3"),l=(e("ac6a"),e("adb5")),p=e("21f4"),d=e("bf2b"),m={openPage:function(t){var o=this;"explain"==t?u["a"].openView("views/shop/noun_explain",{customNavigationBar:{title:"名词解释"}}):"commission"==t&&u["a"].openView("views/shop/estimate_royalty",{customNavigationBar:{url:"views/shop/estimate_royalty/header_frame"},param:{idx:(o.groupGoodsList&&o.groupGoodsList.length)>0?0:1}})},transCommission:function(t){if(t){var o={total:{},group:{},normal:{}};t.totalStatisticsVO&&(o.total={preCommission:t.totalStatisticsVO.total_estimated_royalt||0,turnover:t.totalStatisticsVO.total_sales_price||0,paymentAmount:t.totalStatisticsVO.total_payment_order||0,visitNumber:t.totalStatisticsVO.total_traffic_num||0,salesAmount:t.totalStatisticsVO.total_sales_num||0}),t.groupStatistics&&(o.group={preCommission:t.groupStatistics.group_estimated_royalt||0,turnover:t.groupStatistics.group_sales_price||0,paymentAmount:t.groupStatistics.group_payment_order||0,visitNumber:t.groupStatistics.group_traffic_num||0,salesAmount:t.groupStatistics.group_sales_num||0}),t.normalStatistics&&(o.normal={preCommission:t.normalStatistics.normal_estimated_royalt||0,turnover:t.normalStatistics.normal_sales_price||0,paymentAmount:t.normalStatistics.normal_payment_order||0,visitNumber:t.normalStatistics.normal_traffic_num||0,salesAmount:t.normalStatistics.normal_sales_num||0})}return o||{}},_getDate:function(t){var o=new Date,e=o.getFullYear(),s=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,a=e+"-"+s+"-"+o.getDate(),i="",n="";if(0==t)i=n=a;else if(1==t){var r=new Date(o.getTime()-864e5),c=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,u=r.getFullYear()+"-"+c+"-"+r.getDate();i=n=u}else i=e+"-"+s+"-01",n=a;return{time_start:i+" 00:00:00",time_end:n+" 23:59:59"}},transPercent:function(t,o){return t>=o?p["a"].accMul((o/t).toFixed(2),100):0},transGoodsList:function(t){var o=this,e={groupGoodsList:[],goodsList:[]};return t.bgroupOrderOutputVO&&t.bgroupOrderOutputVO.list.forEach(function(t){var s=[];t.forEach(function(t){var e={goodsId:t.goodsId,goodsPicture:t.imgUrl,goodsName:t.title,salesAmount:t.sales_num,price:t.groupShoppingPrice,normalPrice:t.normalPrice,ownPrice:t.royalty_amount,barwidth:o.transPercent(t.totalStockAmount,t.currentSellAmount),startDate:t.service_currentDate,endDate:t.endTime,actId:t.actId,guideGoodsId:"",skuId:"",isRoyalty:t.is_royalty};s.push(e)}),e.groupGoodsList.push(s),o.groupGoodsList=e.groupGoodsList}),t.guideAppGoodsDetailList?(t.guideAppGoodsDetailList.forEach(function(t){var s={guideGoodsId:"",goodsId:t.goods_id,goodsPicture:t.goods_pic,goodsName:t.goods_title,salesAmount:t.sales_num||0,price:0,minPrice:t.salesPriceInterval[0],maxPrice:t.salesPriceInterval[1],ownPrice:t.maxKpiValue||0,coupon:null,barwidth:0};t.couponBatchVo&&(s.coupon={price:t.couponBatchVo.count_rule_operation_val||0,remainingNum:t.couponBatchVo.couponBatchStatisticsVo.no_receive_num,totalNum:t.couponBatchVo.publish_count},s.barwidth=o.transPercent(s.coupon.totalNum,s.coupon.totalNum-s.coupon.remainingNum)),s.minPrice==s.maxPrice&&(s.price=s.minPrice),e.goodsList.push(s)}),e):e},getGoodsList:function(t){var o=this,e="/app/auth/shop/getIndexIndexGoodsBrief.do";l["a"].ajax({data:t.data,api_versions:"v2",url:e,skipToast:t.data&&1!=t.data.page,success:function(e){var s=e.object||{};t.success&&t.success(o.transGoodsList(s))},error:function(o){t.error&&t.error()}})},getGroupListByType:function(t,o){var e=["SELLING","BEFORE_BEGIN"];d["a"].getGoodsList({data:{type:e[t],page:1,size:10},success:function(t){var e=t.groupGoodsList||[];o&&o(e)}})},gotoGroupListShare:function(t,o){d["a"].gotoListShare(t,o)},getComminssionData:function(t){var o=this,e=o._getDate(t.index||0),s="/app/auth/shop/getIndexStatistics.do";l["a"].ajax({data:e,api_versions:"v2",url:s,success:function(e){var s=o.transCommission(e.object);t.cb&&t.cb(s)}})}},g=e("daa7"),f=e("6abe"),v=e("390f"),_=e("fc32"),h=e("7870"),b=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"jump-line",on:{click:t.jump}},[e("p",[e("label",{staticClass:"title"},[t._v(t._s(t.data.title))]),e("i",{staticClass:"jump-icon"})])])},w=[],L={name:"JumpLine",props:{data:Object},methods:{jump:function(){var t=this;t.data.url?u["a"].openView(t.data.url,t.data.pageParam||{customNavigationBar:{}}):u["a"].toast("页面路径为空！")}}},C=L,y=(e("8475"),e("2877")),G=Object(y["a"])(C,b,w,!1,null,"1d18e572",null),P=G.exports,x=e("fef2"),S=e("2d44"),D=e("e88e"),N={name:"shop_index",components:{SelectTab:_["a"],Commission:h["a"],JumpLine:P,List:f["a"],GoodsItem:v["a"],CountDown:x["a"],LoadMore:S["a"],ProgressBar:D["a"]},created:function(){var t=this;t.update()},mounted:function(){var t=this;u["a"].startRefresh({config:{bgColor:"rgb(18,149,216)"},callback:function(){t.update()}})},data:function(){return{page:1,index:0,tabs:[{name:"今日"},{name:"昨日"},{name:"本月"}],groupListPageData:{title:"正在拼团",url:"views/shop/group_goods_list",pageParam:{customNavigationBar:{title:"拼团商品",url:"views/shop/group_goods_list/header_frame"}}},commissionData:{total:{},group:{},normal:{}},groupGoodsList:[],goodsList:[],sellingList:[[],[]]}},methods:{openPage:function(t){m.openPage(t)},openMoreDataPage:function(){var t=this;u["a"].openView("views/shop/more_data",{param:{commissionData:t.commissionData,index:t.index},customNavigationBar:{url:"views/shop/more_data/header_frame"}})},openAllOrderPage:function(){u["a"].openView("views/shop/group_order",{customNavigationBar:{url:"views/shop/group_order/header_frame"}})},openGroupGoodsList:function(t){0!=t?m.getGroupListByType(t,function(o){m.gotoGroupListShare(t,o)}):m.gotoGroupListShare(t,this.groupGoodsList)},openGoodsDetailPage:function(t){u["a"].openView("views/shop/spread_goods",{param:{goodsId:t.goodsId},customNavigationBar:{title:"商品详情"}})},openGroupGoodsDetailPage:function(t){u["a"].openView("views/shop/group_goods",{param:{goodsId:t.goodsId,actId:t.actId,active_status:0},customNavigationBar:{title:"商品详情"}})},getGoodsList:function(t){var o=this,e=this,s=10;m.getGoodsList({data:{page:e.page,size:s},success:function(s){s.groupGoodsList&&s.groupGoodsList.length>0?(e.groupGoodsList=s.groupGoodsList,e.goodsList=s.goodsList):e.goodsList=e.goodsList.concat(s.goodsList),o.$refs.scroll.requestOK(s.goodsList,e.goodsList),t&&t()},error:function(){o.$refs.scroll.loaded(),t&&t()}}),e.page+=1},getComminssionData:function(t){var o=this;(t||0==t)&&(o.index=t),m.getComminssionData({index:o.index,cb:function(t){o.commissionData=t}})},update:function(){var t=this;t.$refs.scroll&&t.$refs.scroll.init(),t.page=1,g["a"].updateGuideStaffInfo(),t.groupGoodsList=[],t.goodsList=[],t.getComminssionData(),t.getGoodsList()}}},O=N,B=(e("3ab0"),Object(y["a"])(O,r,c,!1,null,"b1d991b8",null)),I=B.exports,k=e("d8ac");n["a"].config.productionTip=!1,k["a"].start(n["a"]),window.EventBus=new n["a"],window.isPc()?(console.log("pc"),new n["a"]({render:function(t){return t(I)},data:{Bus:new n["a"]}}).$mount("#app")):(console.log("移动端"),window.apiready=function(){new n["a"]({render:function(t){return t(I)}}).$mount("#app")})}});