(function(t){function e(e){for(var i,r,o=e[0],u=e[1],c=e[2],d=0,_=[];d<o.length;d++)r=o[d],n[r]&&_.push(n[r][0]),n[r]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);l&&l(e);while(_.length)_.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,o=1;o<s.length;o++){var u=s[o];0!==n[u]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},n={member_repurchase:0},a=[];function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;a.push([36,"chunk-vendors","chunk-common"]),s()})({"092a":function(t,e,s){},36:function(t,e,s){t.exports=s("7fc9")},5952:function(t,e,s){"use strict";var i=s("092a"),n=s.n(i);n.a},"7fc9":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var i=s("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("MemberDetail",{attrs:{item:t.userDetail}}),i("div",{staticClass:"detail"},[i("div",{staticClass:"q-1px-t q-1px-b"},[i("p",[t._v("最近一次消费时间："+t._s(t.userDetail.latest_consume_time)+"（"+t._s(t.userDetail.consume_time_interval)+"天前）")]),i("p",[t._v("该主题最近回访时间："+t._s(t.userDetail.latest_visit_time)+" （"+t._s(t.userDetail.visit_time_interval)+"天前）")])])]),i("div",{staticClass:"redmind_status q-1px-b"},[i("span",{staticClass:"status"},[t._v(t._s(t.remind_name))]),i("span",{staticClass:"screen",on:{click:function(e){t.isShow=!0}}},[t._v("筛选")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"screen_select"},t._l(t.remindList,function(e,s){return i("p",{key:s,class:{"q-1px-t q-1px-b":e.isLine},on:{click:function(s){return t.selectStatus(e)}}},[t._v(t._s(e.name))])}),0)]),i("div",{staticClass:"product"},[i("LoadMore",{ref:"scroll",on:{loadmore:t.queryData}},[i("List",{attrs:{list:t.productList},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.item,s=t.index;return[i("ProductInfo",{attrs:{item:e,index:s}})]}}])})],1),t.noResult?i("div",{staticClass:"no_result"},[i("img",{attrs:{src:s("7255")}}),i("p",[t._v("没有查到相关信息")])]):t._e()],1),i("div",{directives:[{name:"access",rawName:"v-access:visit",arg:"visit"}],staticClass:"footer_button",on:{click:function(e){return t.jumpTo()}}},[t._v("回访")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"mask"})],1)},a=[],r=(s("7f7f"),s("a3d3")),o=s("adb5"),u=s("87ad"),c=function(t){return{user_name:t.user_name,user_id:t.user_id,ageTag:u["a"].getMemberOld(t.birthday),card_no:t.card_no,sex:t.sex,phone:t.phone,integral:t.integral,level:u["a"].getVip(t.user_level_name),latest_consume_time:t.latest_consume_time||"--",latest_visit_time:t.latest_visit_time||"--",consume_time_interval:t.consume_time_interval,visit_time_interval:t.visit_time_interval}},l={getUserInfo:function(t){var e={user_id:u["a"].getUserId(),care_id:7},s="/app/auth/crm/user/listInfoAndLatestTime.do";o["a"].ajax({url:s,api_versions:"v2",action:"获取会员信息",data:e,success:function(e){var s=e.object||{};t.success&&t.success(c(s))},error:function(e){t.error&&t.error(e)}})},getProduct:function(t){var e=t.data||{},s="/app/auth/crm/multiConRedmind/listMCRemindProductDetail.do";e.user_id=u["a"].getUserId(),o["a"].ajax({url:s,api_versions:"v2",action:"获取商品信息",data:e,success:function(e){var s=e.object||[];t.success&&t.success(s)},error:function(e){t.error&&t.error(e)}})},jumpTo:function(t){var e="views/member/visit_entry";r["a"].openView(e,{param:{user_id:u["a"].getUserId(),isLightStatusBar:!0,detail:t.detail},customNavigationBar:{style:{background:"#4cbdbe",color:"#fff"},title:"回访录入",leftIcon:s("d133")}})}},d=s("319d"),_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product q-1px-b"},[s("p",[s("span",{staticClass:"name"},[t._v("商品名称："+t._s(t.item.product_name))]),s("span",{staticClass:"status float_right",class:{status_active:"已提醒"==t.item.redmind_status}},[t._v(t._s(t.item.redmind_status))])]),s("p",[t._v("商品条码："+t._s(t.item.bar_code))]),s("p",[t._v("购买日期："+t._s(t.item.consume_time)+" "),s("span",{staticClass:"float_right"},[t._v("数量："+t._s(t.item.goods_count))])]),s("p",[t._v("使用周期："+t._s(t.item.single_use_days+"天/件")+" \n      "),s("span",{staticClass:"float_right"},[t._v("剩余天数："),s("span",{staticClass:"red"},[t._v(t._s(t.item.estimate_lave_days))])])]),s("p",[t._v("预计用完："+t._s(t.item.estimate_used_time))])])},m=[],p={name:"ProductInfo",props:{item:Object}},f=p,v=(s("5952"),s("2877")),h=Object(v["a"])(f,_,m,!1,null,"e212fb2a",null),g=h.exports,b=s("6abe"),w=s("2d44"),y={name:"repurchase",components:{MemberDetail:d["a"],List:b["a"],ProductInfo:g,LoadMore:w["a"]},data:function(){return{page:1,userDetail:{},remind_name:"全部商品",redmind_status:"",isShow:!1,remindList:[{name:"全部商品",redmind_status:""},{name:"未提醒商品",redmind_status:"no_visit",isLine:!0},{name:"已提醒商品",redmind_status:"visited"}],productList:[],noResult:!1}},created:function(){},mounted:function(){this.getInfo(),this.getProduct(!0)},methods:{getInfo:function(){var t=this;l.getUserInfo({success:function(e){t.userDetail=e}})},getProduct:function(t){var e=this;l.getProduct({data:{page:t?1:this.page,displayRecord:5,redmind_status:this.redmind_status},success:function(s){e.productList=t?s:e.productList.concat(s),s&&5==s.length?e.$refs.scroll.loaded():e.$refs.scroll.complete(),0==e.productList.length?(e.$refs.scroll.hideTips(),e.noResult=!0):e.noResult=!1},error:function(){e.noResult=!0,r["a"].toast("查询商品信息失败",{location:"middle"})}})},queryData:function(){this.page+=1,this.getProduct(!1)},selectStatus:function(t){this.remind_name=t.name,this.redmind_status=t.redmind_status,this.isShow=!1,this.page=1,this.$refs.scroll.init(),this.getProduct(!0)},jumpTo:function(){l.jumpTo({detail:this.userDetail})}}},x=y,j=(s("9fae"),Object(v["a"])(x,n,a,!1,null,"92945a9e",null)),C=j.exports,P=s("d8ac");i["a"].config.productionTip=!1,P["a"].start(i["a"]),window.EventBus=new i["a"],window.isPc()?(console.log("pc"),new i["a"]({render:function(t){return t(C)},data:{Bus:new i["a"]}}).$mount("#app")):(console.log("移动端"),window.apiready=function(){new i["a"]({render:function(t){return t(C)}}).$mount("#app")})},"9fae":function(t,e,s){"use strict";var i=s("b45e"),n=s.n(i);n.a},b45e:function(t,e,s){}});