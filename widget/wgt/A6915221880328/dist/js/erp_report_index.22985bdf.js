(function(t){function e(e){for(var s,n,r=e[0],l=e[1],c=e[2],p=0,d=[];p<r.length;p++)n=r[p],o[n]&&d.push(o[n][0]),o[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==o[l]&&(s=!1)}s&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},o={erp_report_index:0},i=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([4,"chunk-vendors","chunk-common"]),a()})({1440:function(t,e,a){"use strict";var s=a("d388"),o=a.n(s);o.a},"3a98":function(t,e,a){"use strict";var s=a("d6f8"),o=a.n(s);o.a},4:function(t,e,a){t.exports=a("8cbc")},"8cbc":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("withoutData",{directives:[{name:"show",rawName:"v-show",value:t.status,expression:"status"}],attrs:{status:t.status}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.length>0,expression:"dataList.length>0"}],staticClass:"content"},[a("LoadMore",{ref:"scroll",on:{loadmore:t.getList}},[a("div",{staticClass:"data"},[a("List",{attrs:{list:t.dataList},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item,o=e.index;return[a("DataShow",{attrs:{dataType:t.dataType,item:s,index:o,max:t.max}})]}}])})],1),"salesvolume"!=t.dataType?a("div",{staticClass:"foot"},[a("div",{staticClass:"foot_item"},[a("span",{staticClass:"sale"}),a("span",[t._v("营业额")])]),a("div",{staticClass:"foot_item"},[a("span",{staticClass:"earn"}),a("span",[t._v("毛利")])])]):a("div",{staticClass:"foot"},[a("div",{staticClass:"foot_item num"},[a("span",{staticClass:"sale"}),a("span",[t._v("总销量")])])])])],1)],1)},i=[],n=a("a3d3"),r=a("b2eb"),l=a("2d44"),c=a("2e39"),u=a("6abe"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"salesvolume"!=t.dataType?a("div",{staticClass:"item"},[a("div",{staticClass:"item_title"},[t._v(t._s(t.item.store_name||t.item.product_name)+"  "+t._s(t.item.sku_name))]),a("div",{staticClass:"item_content"},[a("div",{staticClass:"content_left",class:"icon"+t.index},[t._v(t._s(t.index>2?t.index+1:""))]),a("div",{staticClass:"content_right"},[a("div",{staticClass:"sale commom",style:t.calc(t.item.total_turnover)},[t._v(t._s(t._f("trans-price")(t.item.total_turnover)))]),a("div",{staticClass:"earn commom",style:t.calc(t.item.total_gross_profit)},[t._v(t._s(t._f("trans-price")(t.item.total_gross_profit)))])])])]):a("div",{staticClass:"sale_item"},[a("div",{staticClass:"item_left",class:"icon"+t.index},[t._v(t._s(t.index>2?t.index+1:""))]),a("div",{staticClass:"item_right"},[a("div",{staticClass:"right_title"},[t._v(t._s(t.item.store_name||t.item.product_name)+"  "+t._s(t.item.sku_name))]),a("div",{staticClass:"sale commom",style:t.calc(t.item.total_sales_volume)},[t._v(t._s(t.item.total_sales_volume))])])])},d=[],m=(a("c5f6"),{name:"DataShow",components:{},props:{dataType:String,max:Number,item:Object,index:Number},data:function(){return{}},computed:{calc:function(){return function(t){var e=this.max;if(e)return t<0?{width:0,textIndent:".6rem",opacity:"1",color:"#ff003c"}:t/e*5.4<.8?{width:t/e*5.4+"rem",textIndent:".6rem",opacity:"1",transition:"width 0.5s"}:{width:t/e*5.4+"rem",justifyContent:"flex-end",paddingRight:".24rem",opacity:"1",transition:"width 0.5s"}}}},created:function(){},methods:{}}),f=m,_=(a("1440"),a("2877")),v=Object(_["a"])(f,p,d,!1,null,"6fb1a350",null),h=v.exports,x=a("5176"),g=a.n(x),b=a("adb5"),y=null,w=function(t){var e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate(),o=e+"-"+a+"-"+s;return o},j=function(t,e){e||(e=w(new Date));var a="min"==t?" 00:00:00":" 23:59:59";return-1==e.indexOf(" 00:00:00")&&-1==e.indexOf(" 23:59:59")?e+a:e},L={store:{totalUrl:"/app/auth/erp/report/sumStoreRetailRank.do",rankUrl:"/app/auth/erp/report/listStoreRetailRank.do",maxUrl:"/app/auth/erp/report/maxStoreRetailRank.do"},goods:{totalUrl:"/app/auth/erp/report/sumGoodsRetailRank.do",rankUrl:"/app/auth/erp/report/listGoodsRetailRank.do",maxUrl:"/app/auth/erp/report/maxGoodsRetailRank.do"}},C=function(t,e,a){var s={};b["a"].ajax({url:L[y].maxUrl,data:t,api_versions:"v2",success:function(o){o.object?"salesvolume"==t.data_type?s.max=o.object.max_sales_volume:s.max=o.object.max_gross_profit>o.object.max_turnover?o.object.max_gross_profit:o.object.max_turnover:s.max=0,s.list=e,a(s)}})},O={page:1,displayRecord:20,orgIdList:[],staffIdList:[],classIdList:[],brandIdList:[],prodIdList:[],low_upload_time:"",upper_upload_time:"",data_type:"turnover",sort_type:"desc"},k=function(t,e){t.low_upload_time=j("min",t.low_upload_time),t.upper_upload_time=j("max",t.upper_upload_time),b["a"].ajax({url:L[y].rankUrl,data:t,api_versions:"v2",success:function(a){a.object&&a.object.length>0?C(t,a.object,e):e({list:[],max:0})}})},R=function(t){t.low_upload_time=j("min",t.low_upload_time),t.upper_upload_time=j("max",t.upper_upload_time),b["a"].ajax({url:L[y].totalUrl,data:t,api_versions:"v2",success:function(t){t.object?r["a"].publish("customUpdateHead",t.object):r["a"].publish("customUpdateHead",[])}})},S={setOpts:function(t,e,a){var s=g()(O,e);y=t,"store"==t&&(delete O.orgIdList,delete O.staffIdList),k(s,a),R(s)}},U={name:"index",components:{LoadMore:l["a"],DataShow:h,List:u["a"],withoutData:c["a"]},created:function(){var t=this;r["a"].subscribe("customSaleRank",function(e){t.reset();var a={data_type:e.type,sort_type:e.rank,page:t.page};t.dataType=e.type,S.setOpts(t.type,a,function(e){t.max=e.max,t.dataList=e.list})}),r["a"].subscribe("customDataShow",function(e){t.reset(),e.page=t.page,S.setOpts(t.type,e,function(e){t.max=e.max,t.dataList=e.list})})},mounted:function(){var t=this,e=n["a"].getParam();t.type=e.type;var a={upper_upload_time:e.upper_upload_time,low_upload_time:e.low_upload_time,orgIdList:e.orgIdList};S.setOpts(t.type,a,function(e){t.max=e.max,t.dataList=e.list}),n["a"].startRefresh({callback:function(){t.reset(),S.setOpts(t.type,{page:t.page},function(e){t.max=e.max,t.dataList=e.list})}})},data:function(){return{page:1,type:"",dataList:[],dataType:"",status:"",max:0}},watch:{dataList:function(t,e){t!=e&&(0==t.length?this.status="without_data":this.status="")}},methods:{getList:function(){var t=this;t.page++,S.setOpts(t.type,{page:t.page},function(e){t.dataList=t.dataList.concat(e.list),e.list&&20===e.list.length?(console.log("loaded"),t.$refs.scroll.loaded()):(console.log("complete"),t.$refs.scroll.complete())})},reset:function(){var t=this;t.max=0,t.page=1,n["a"].pageUp(!0,function(){t.$refs.scroll.init()})}}},I=U,T=(a("3a98"),Object(_["a"])(I,o,i,!1,null,"7b3dbc88",null)),D=T.exports,P=a("d8ac");s["a"].config.productionTip=!1,P["a"].start(s["a"]),window.EventBus=new s["a"],window.isPc()?(console.log("pc"),new s["a"]({render:function(t){return t(D)},data:{Bus:new s["a"]}}).$mount("#app")):(console.log("移动端"),window.apiready=function(){new s["a"]({render:function(t){return t(D)}}).$mount("#app")})},d388:function(t,e,a){},d6f8:function(t,e,a){}});