(function(t){function e(e){for(var n,a,r=e[0],c=e[1],u=e[2],d=0,m=[];d<r.length;d++)a=r[d],o[a]&&m.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==o[c]&&(n=!1)}n&&(s.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},o={member_index:0},s=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;s.push([9,"chunk-vendors","chunk-common"]),i()})({"0cf7":function(t,e,i){},"1d77":function(t,e,i){"use strict";var n=i("82e4"),o=i.n(n);o.a},"260b":function(t,e,i){},"2e2e":function(t,e,i){"use strict";var n=i("4f86"),o=i.n(n);o.a},"4f86":function(t,e,i){},"82e4":function(t,e,i){},"8a51":function(t,e,i){"use strict";var n=i("260b"),o=i.n(n);o.a},9:function(t,e,i){t.exports=i("d486")},d486:function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("LoadMore",{ref:"scroll",on:{loadmore:t.queryDate}},[i("span",{staticClass:"ui-weekturnover__chartTitle"},[t._v("近七天新增会员数")]),i("div",{ref:"myEchart",staticClass:"ui-weekturnover__bigImage",attrs:{id:"echart"}}),i("List",{attrs:{list:t.UserInfoList},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.item,n=t.index;return[i("UserInfoListItem",{attrs:{item:e,index:n}})]}}])}),i("div",{staticClass:"ui-weekturnover__detailHeader",attrs:{tapmode:""},on:{click:t.toMemberMessage}},[i("i",{staticClass:"ui-weekturnover_leftIcon"}),i("span",{staticClass:"ui-weekturnover__dataText__three"},[t._v("会员信息")]),i("i",{staticClass:"ui-weekturnover_rightIcon"})]),i("List",{attrs:{list:t.themeList},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.item,n=t.index;return[i("ThemeListItem",{attrs:{item:e,index:n}})]}}])}),i("List",{attrs:{list:t.list},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.item,n=t.index;return[i("ListItem",{attrs:{item:e,index:n}})]}}])}),i("div",{staticClass:"ui-member_more",on:{click:t.toThemeList}},[t._v("\n        查看全部关怀主题\n    ")])],1)],1)},s=[],a=i("f499"),r=i.n(a),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-member__dayoften",attrs:{tapmode:""},on:{click:function(e){return t.toAllTheme("usual")}}},[i("div",{staticClass:"ui-member__themename"},[i("i",{class:"usual"===t.item.type?"ui-theme__usual":"ui-theme__purcharse"}),t._v("\n        "+t._s(t.item.title)+"\n    ")]),i("div",{staticClass:"ui-member__themepeople"},[t._v("\n        最近7天回访 "),i("span",{staticClass:"color912"},[t._v(t._s(t.item.visit_count)+"人")])]),i("div",{staticClass:"ui-member__themetime"},[t._v("\n        "+t._s(t.item.deploy_time)+"\n    ")])])},u=[],l=(i("c5f6"),{name:"ListItem",props:{item:Object,index:Number},methods:{toAllTheme:function(){console.log("chooseItem"+this.index),window.EventBus.$emit("chooseItem",this.item,this.index)}}}),d=l,m=(i("8a51"),i("2877")),f=Object(m["a"])(d,c,u,!1,null,"34d8a3d4",null),p=f.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-weekturnover__dataBlock__two",on:{click:t.chooseItem}},[i("div",{class:"ui-weekturnover__icon__"+t.item.iconType}),i("div",{staticClass:"ui-weekturnover__left"},[i("span",{staticClass:"ui-weekturnover__dataText__two"},[t._v(t._s(t.item.title))])]),i("div",{staticClass:"ui-weekturnover__right"},[i("span",{staticClass:"ui-member__allnumber"},[t._v(t._s(t.item.count))])])])},h=[],v={name:"UserInfoItem",props:{item:{type:Object,default:function(){return{iconType:"one",title:"",count:0}}},index:Number},methods:{chooseItem:function(){console.log("chooseItem"+this.index),window.EventBus.$emit("chooseItem",this.item,this.index)}}},g=v,y=(i("d5fd"),Object(m["a"])(g,_,h,!1,null,"00f10d0c",null)),b=y.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-member__themecare qqbibi-1px-b",attrs:{tapmode:""},on:{click:t.chooseItem}},[i("div",{staticClass:"ui-member__themename"},[i("i"),t._v("\n          "+t._s(t.item.title)+"\n          "),t.item.content?i("b",{attrs:{tapmode:""},on:{click:function(e){return e.stopPropagation(),t.alertContent(t.index)}}}):t._e()]),i("div",{staticClass:"progress-bar blue stripes"},[i("p",{staticClass:"ui-theme__progressBar"},[i("span",{directives:[{name:"show",rawName:"v-show",value:Math.round(10*t.item.visit_count/t.item.user_count),expression:"Math.round(item.visit_count * 10 / item.user_count)"}],staticClass:"ui-theme__progressBarLine",class:"ui-theme__expand-"+Math.round(10*t.item.visit_count/t.item.user_count)})])]),i("div",{staticClass:"ui-member__themepeople"},[i("div",{staticClass:"ui-member__people"},[i("span",[t._v(t._s(t.item.visit_count))]),t._v("/"),i("span",[t._v(t._s(t.item.user_count))]),t._v("人\n          ")]),i("div",{staticClass:"ui-member__percentum"},[t._v("\n              "+t._s(t._f("roundOff")(t.item.visit_count/t.item.user_count))+"%\n          ")])]),i("div",{staticClass:"ui-member__themetime"},[t._v("\n          "+t._s(t.item.deploy_time)+"\n      ")])])},x=[],C=i("59ad"),I=i.n(C),k=i("a3d3"),L={name:"ListItem",props:{item:Object,index:Number},created:function(){},filters:{roundOff:function(t){return 0===I()(t)?0:100*t|0},toPercent:function(t){var e=Math.round(10*t),i=[0,1,2,3,4,5,6,7,8,9,10];return i[e]}},methods:{alertContent:function(){if(""!==this.item.content){var t=r()(this.item.content);k["a"].alert(t,function(){},{title:"内容"})}},chooseItem:function(){console.log("chooseItem"+this.index),window.EventBus.$emit("chooseItem",this.item,this.index)}}},T=L,j=(i("1d77"),Object(m["a"])(T,w,x,!1,null,"77e9a8b7",null)),O=j.exports,S=i("6abe"),M=i("313e"),G=i.n(M),B=i("adb5"),D=i("21f4"),A=function(t){return t=t||[],t.map(function(t){return{achieved_rate:t.achieved_rate,care_id:t.care_id,deploy_time:t.deploy_time.substring(5,16),end_time:t.end_time,status:t.status,title:t.title,type:t.type,user_count:t.user_count,visit_count:t.visit_count,content:t.content}})},E={getIndexIndexGoodsBrief:function(t){var e={companyId:150,staffPositionId:101237,shop_id:129,act_id:546,good_id:345},i="/app/auth/shop/getGroupShoppingGoodsDetail.do";B["a"].ajax({url:i,data:e,success:function(e){console.log("请求成功"),t&&t(e)}})},getGraphData:function(t){var e=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()).getTime()+864e5,i=e-6048e5;B["a"].ajax({data:{endAt:e,startAt:i},api_versions:"v2",url:"/app/auth/crm/user/listChart.do",success:function(e){e=e||{},console.log("index res "+r()(e.object)),t&&t(e.object||[])}})},gotoMine:function(){k["a"].openView("views/shop/index",{customNavigationBar:{style:{background:"#54caf0",color:"#fff"},title:"会员",leftIcon:i("63e0")}})},getConsumStat:function(t){var e="/app/auth/crm/user/getConsumStat.do";B["a"].ajax({data:{},api_versions:"v2",url:e,success:function(e){var i=e.object||{};i.consumeAverage=D["a"].transMills(i.consumeAverage),i.consumeSum=D["a"].transMills(i.consumeSum),t&&t(i)}})},listCrmCare:function(t){t=t||{};var e=t.data||{},i={displayRecord:e.displayRecord,include_usual:!0,lastest_day:7,ongoing_status:"ongoing",page:e.page,type:e.type},n="/app/auth/crm/care/listCrmCare.do";B["a"].ajax({data:i,api_versions:"v2",url:n,skipToast:!0,success:function(i){var n=i.object||{};"special"===e.type&&(console.log("IndexService listCrmCare list"+r()(n)),n=A(n)),t.success&&t.success(n)}})},getCareCount:function(t){var e={},i="/app/auth/crm/care/latest.do";B["a"].ajax({data:e,url:i,api_versions:"v2",success:function(e){var i=e.object||{};t&&t(i.care_count)}})},gotoStore:function(){console.log("goto A20190226"),k["a"].openView("views/shop/index",{customNavigationBar:{style:{background:"red"},url:"views/member/index/header_frame"}})},getGraphOption:function(t,e){return{backgroundColor:new e.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#4cbdbe"},{offset:1,color:"#1793da"}],!1),title:{show:!1,top:0},tooltip:{trigger:"axis",triggerOn:"click",position:function(t,e,i){var n=0;return n=0===e[0].dataIndex?t[0]+2:6===e[0].dataIndex||5===e[0].dataIndex?t[0]-i.offsetWidth-2:t[0]+2,[n,"10%"]},axisPointer:{type:"line",lineStyle:{color:"#fff"}},formatter:function(e){return D["a"].formatTip(t,"x")[e[0].dataIndex]+"</br>新增会员数:"+D["a"].formatTip(t,"y")[e[0].dataIndex]}},legend:{show:!1,top:0},grid:{show:!0,left:30,top:34,bottom:30,right:30,borderColor:"#84ccdd",borderWidth:2},xAxis:{data:D["a"].formatData(t,"x"),axisLabel:{show:!0,interval:0,textStyle:{color:"#fff"}},splitLine:{show:!0,lineStyle:{color:["#84ccdd"],type:"dashed"},interval:0},boundaryGap:!1,axisLine:{show:!1},axisTick:{show:!1}},yAxis:{axisLabel:{show:!1},axisTick:{show:!1},splitLine:{show:!1},splitArea:{},min:0,nameLocation:"end",axisLine:{show:!1}},series:[{name:"新增会员数",coordinateSystem:"cartesian2d",type:"line",data:D["a"].formatData(t,"y"),lineStyle:{normal:{color:"#fff",shadowColor:"#666",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:6}},markArea:{silent:!1},clipOverflow:!1,symbolSize:10,hoverAnimation:!1}]}}},$=i("2d44");window.onTitle=function(){k["a"].confirm("title")},window.onRightButton=function(){k["a"].confirm("right button")};var P={name:"index",components:{List:S["a"],ThemeListItem:p,ListItem:O,UserInfoListItem:b,LoadMore:$["a"]},created:function(){window.EventBus.$on("chooseItem",function(t,e){console.log(r()(t)+e)})},mounted:function(){this.initEchart(),this.getGraph(),this.getUserInfo(),this.getThemeGo(),this.getDayCare(),this.getTheme(),E.getIndexIndexGoodsBrief(),k["a"].startRefresh(function(){E.getIndexIndexGoodsBrief()})},data:function(){return{page:1,myChart:null,UserInfoList:[{title:"会员总数",type:"usual",count:10,iconType:"one"},{title:"会员累计平均消费（元）",type:"special",count:10,iconType:"two"},{title:"会员累计总消费",type:"special",count:112340.11,iconType:"three"}],themeList:[{title:"测试title",type:"usual",visit_count:10,deploy_time:"2019-06-01"},{title:"复购提醒",type:"special",visit_count:10,deploy_time:"不限期"}],list:[{achieved_rate:"1111",care_id:1234,deploy_time:"2019-06-01",end_time:"2019-06-02",status:"00A",title:"测试item",type:"usual",user_count:10,visit_count:10},{achieved_rate:"1111",content:"测试",care_id:1234,deploy_time:"2019-06-01",end_time:"2019-06-02",status:"00A",title:"测试item",type:"usual",user_count:4,visit_count:2}]}},methods:{queryDate:function(){var t=this;this.page+=1,E.listCrmCare({data:{page:this.page,displayRecord:10,type:"special"},success:function(e){t.list=t.list.concat(e),e&&10===e.length?(console.log("loaded"),t.$refs.scroll.loaded()):(console.log("complete"),t.$refs.scroll.complete())}})},getUserInfo:function(){E.getIndexIndexGoodsBrief(function(t){console.log(t)})},getThemeGo:function(){var t=this;E.listCrmCare({data:{page:1,displayRecord:10,type:"special"},success:function(e){t.list=e}})},getDayCare:function(){var t=this;E.listCrmCare({data:{type:"usual"},success:function(e){t.themeList=e}})},getTheme:function(){var t=this;E.getCareCount(function(e){t.themeList[0].visit_count=e})},toMemberMessage:function(){E.gotoStore()},initEchart:function(){this.myChart=G.a.init(this.$refs.myEchart)},showGraph:function(t){var e=E.getGraphOption(t,G.a);this.myChart.setOption(e)},getGraph:function(){var t=this;E.getGraphData(function(e){t.showGraph(e)})},toThemeList:function(){E.gotoMine()}}},U=P,N=(i("2e2e"),Object(m["a"])(U,o,s,!1,null,"7d42480c",null)),R=N.exports,q=i("d8ac");n["a"].config.productionTip=!1,q["a"].start(n["a"]),window.EventBus=new n["a"],window.isPc()?(console.log("pc"),new n["a"]({render:function(t){return t(R)},data:{Bus:new n["a"]}}).$mount("#app")):(console.log("移动端"),console.log("index main.js timestrap "+(new Date).getTime()),window.apiready=function(){new n["a"]({render:function(t){return t(R)}}).$mount("#app")})},d5fd:function(t,e,i){"use strict";var n=i("0cf7"),o=i.n(n);o.a}});