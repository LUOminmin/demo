(function(t){function o(o){for(var a,n,r=o[0],c=o[1],u=o[2],p=0,d=[];p<r.length;p++)n=r[p],e[n]&&d.push(e[n][0]),e[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(o);while(d.length)d.shift()();return i.push.apply(i,u||[]),s()}function s(){for(var t,o=0;o<i.length;o++){for(var s=i[o],a=!0,r=1;r<s.length;r++){var c=s[r];0!==e[c]&&(a=!1)}a&&(i.splice(o--,1),t=n(n.s=s[0]))}return t}var a={},e={shop_index:0},i=[];function n(o){if(a[o])return a[o].exports;var s=a[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,o,s){n.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,o){if(1&o&&(t=n(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var a in t)n.d(s,a,function(o){return t[o]}.bind(null,a));return s},n.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=o,r=r.slice();for(var u=0;u<r.length;u++)o(r[u]);var l=c;i.push([26,"chunk-vendors","chunk-common"]),s()})({"0ace":function(t,o,s){},26:function(t,o,s){t.exports=s("caf6")},"46f7":function(t,o,s){},8475:function(t,o,s){"use strict";var a=s("0ace"),e=s.n(a);e.a},caf6:function(t,o,s){"use strict";s.r(o);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),e=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{attrs:{id:"app"}},[s("LoadMore",{ref:"scroll",on:{loadmore:t.getGoodsList}},[s("div",{staticClass:"tab-wrap-background"}),s("div",{staticClass:"commission-data"},[s("SelectTab",{staticClass:"tab color-black-102",attrs:{tabs:t.tabs,isindex:!0},on:{selected:t.getComminssionData}}),s("Commission",{staticClass:"commission",attrs:{data:t.commissionData.total,nounExplain:!0},on:{commissionClick:t.openPage}}),s("div",[s("button",{staticClass:"more-data color-black-102 size-24",on:{click:t.openMoreDataPage}},[t._v("\n          查看更多数据\n        ")])])],1),s("div",{staticClass:"all-order"},[s("button",{on:{click:t.openAllOrderPage}},[t._v("全部提成订单")])]),s("JumpLine",{attrs:{data:t.groupListPageData}}),s("div",{staticClass:"share-button"},[s("button",{staticClass:"ing",on:{click:function(o){return t.openGroupGoodsList(0)}}}),s("button",{staticClass:"prepare",on:{click:function(o){return t.openGroupGoodsList(1)}}})]),t._l(t.groupGoodsList,function(o){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.groupGoodsList.length>0,expression:"groupGoodsList.length>0"}],key:o.id},[s("p",{staticClass:"group-list-wrap q-1px-b"},[s("label",[t._v("距活动结束")]),s("CountDown",{staticClass:"count-down",attrs:{time:o[0]}})],1),s("List",{attrs:{list:o},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.item,e=o.index;return[s("GoodsItem",{staticClass:"q-1px-b",attrs:{item:a,index:e},on:{goodsClick:t.openGroupGoodsDetailPage}},[[s("div",{staticClass:"goods-list isgroup-list"},[s("div",[s("ProgressBar",{staticClass:"progress-bar",attrs:{isgroup:!0,barwidth:a.barwidth}}),s("div",{staticClass:"group-percent"},[s("span",[t._v("已抢"+t._s(a.barwidth||0)+"%")])])],1),s("p",{staticClass:"sales-amount"},[t._v("销量 "+t._s(a.salesAmount))]),s("p",{staticClass:"price"},[s("span",{staticClass:"yuan"},[t._v("￥")]),s("label",{staticClass:"final-price"},[t._v(t._s(t._f("trans-price")(a.price)))]),s("span",{staticClass:"normal-price"},[t._v("￥"+t._s(t._f("trans-price")(a.normalPrice)))]),100==a.barwidth?s("span",{staticClass:"commission-price sold-out"},[t._v("已抢完")]):1==a.isRoyalty&&a.ownPrice>=100?s("span",{staticClass:"commission-price isgroup"},[t._v("赚"+t._s(t._f("trans-price-to-int")(a.ownPrice/100))+"元")]):t._e()])])]],2)]}}],null,!0)})],1)}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.goodsList.length>0,expression:"goodsList.length>0"}]},[s("p",{staticClass:"goods-list-wrap"},[s("label",[t._v("导购推广商品")])]),s("List",{staticClass:"goods-list",attrs:{list:t.goodsList},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.item,e=o.index;return[s("GoodsItem",{staticClass:"q-1px-b",attrs:{item:a,index:e},on:{goodsClick:t.openGoodsDetailPage}},[[s("div",{staticClass:"goods-list"},[s("div",{directives:[{name:"show",rawName:"v-show",value:a.coupon,expression:"item.coupon"}]},[s("ProgressBar",{staticClass:"progress-bar",attrs:{isgroup:!1,barwidth:a.barwidth}}),s("div",{staticClass:"group-percent percent"},[s("span",[t._v("已抢"+t._s(a.barwidth||0)+"%")]),s("div",{directives:[{name:"show",rawName:"v-show",value:a.coupon,expression:"item.coupon"}],staticClass:"coupon"},[s("span",[t._v("券"+t._s(t._f("trans-price-to-int")(a.coupon&&a.coupon.price))+"元")]),s("span",[t._v("还剩"+t._s(a.coupon&&a.coupon.remainingNum)+"张")])])])],1),s("p",{staticClass:"sales-amount"},[t._v("销量 "+t._s(a.salesAmount))]),s("p",{staticClass:"price"},[s("span",{staticClass:"yuan"},[t._v("￥")]),s("label",{staticClass:"final-price"},[t._v(t._s(t._f("trans-price")(a.price)))]),s("label",{directives:[{name:"show",rawName:"v-show",value:a.coupon,expression:"item.coupon"}],staticClass:"final-price-title"},[t._v("券后价")]),s("span",{directives:[{name:"show",rawName:"v-show",value:a.ownPrice>=1,expression:"item.ownPrice>=1"}],staticClass:"commission-price"},[t._v("赚"+t._s(t._f("trans-price-to-int")(a.ownPrice))+"元")])])])]],2)]}}])})],1)],2)],1)},i=[],n=s("a3d3"),r=(s("ac6a"),s("adb5")),c=s("21f4"),u=s("bf2b"),l={openPage:function(t){var o=this;"explain"==t?n["a"].openView("views/shop/noun_explain",{customNavigationBar:{title:"名词解释"}}):"commission"==t&&n["a"].openView("views/shop/estimate_royalty",{customNavigationBar:{url:"views/shop/estimate_royalty/header_frame"},param:{idx:o.groupGoodsList.length>0?0:1}})},transCommission:function(t){if(t){var o={total:{},group:{},normal:{}};t.totalStatisticsVO&&(o.total={preCommission:t.totalStatisticsVO.total_estimated_royalt||0,turnover:t.totalStatisticsVO.total_sales_price||0,paymentAmount:t.totalStatisticsVO.total_payment_order||0,visitNumber:t.totalStatisticsVO.total_traffic_num||0,salesAmount:t.totalStatisticsVO.total_sales_num||0}),t.groupStatistics&&(o.group={preCommission:t.groupStatistics.group_estimated_royalt||0,turnover:t.groupStatistics.group_sales_price||0,paymentAmount:t.groupStatistics.group_payment_order||0,visitNumber:t.groupStatistics.group_traffic_num||0,salesAmount:t.groupStatistics.group_sales_num||0}),t.normalStatistics&&(o.normal={preCommission:t.normalStatistics.normal_estimated_royalt||0,turnover:t.normalStatistics.normal_sales_price||0,paymentAmount:t.normalStatistics.normal_payment_order||0,visitNumber:t.normalStatistics.normal_traffic_num||0,salesAmount:t.normalStatistics.normal_sales_num||0})}return o||{}},_getDate:function(t){var o=new Date,s=o.getFullYear(),a=o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1,e=s+"-"+a+"-"+o.getDate(),i="",n="";if(0==t)i=n=e;else if(1==t){var r=new Date(o.getTime()-864e5),c=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,u=r.getFullYear()+"-"+c+"-"+r.getDate();i=n=u}else i=s+"-"+a+"-01",n=e;return{time_start:i+" 00:00:00",time_end:n+" 23:59:59"}},transPercent:function(t,o){return t>=o?c["a"].accMul((o/t).toFixed(2),100):0},transGoodsList:function(t){var o=this,s={groupGoodsList:[],goodsList:[]};return t.bgroupOrderOutputVO&&t.bgroupOrderOutputVO.list.forEach(function(t){var a=[];t.forEach(function(t){var s={goodsId:t.goodsId,goodsPicture:t.imgUrl,goodsName:t.title,salesAmount:t.sales_num,price:t.groupShoppingPrice,normalPrice:t.normalPrice,ownPrice:t.royalty_amount,barwidth:o.transPercent(t.totalStockAmount,t.currentSellAmount),startDate:t.service_currentDate,endDate:t.endTime,actId:t.actId,guideGoodsId:"",skuId:"",isRoyalty:t.is_royalty};a.push(s)}),s.groupGoodsList.push(a),o.groupGoodsList=s.groupGoodsList}),t.guideAppGoodsDetailList?(t.guideAppGoodsDetailList.forEach(function(t){var a={guideGoodsId:"",goodsId:t.goods_id,goodsPicture:t.goods_pic,goodsName:t.goods_title,salesAmount:t.sales_num||0,price:0,minPrice:t.salesPriceInterval[0],maxPrice:t.salesPriceInterval[1],ownPrice:t.maxKpiValue||0,coupon:null,barwidth:0};t.couponBatchVo&&(a.coupon={price:t.couponBatchVo.count_rule_operation_val||0,remainingNum:t.couponBatchVo.couponBatchStatisticsVo.no_receive_num,totalNum:t.couponBatchVo.publish_count},a.barwidth=o.transPercent(a.coupon.totalNum,a.coupon.totalNum-a.coupon.remainingNum)),a.minPrice==a.maxPrice&&(a.price=a.minPrice),s.goodsList.push(a)}),s):s},getGoodsList:function(t){var o=this,s="/app/auth/shop/getIndexIndexGoodsBrief.do";r["a"].ajax({data:t.data,api_versions:"v2",url:s,skipToast:t.data&&1!=t.data.page,success:function(s){var a=s.object||{};t.success&&t.success(o.transGoodsList(a))},error:function(o){t.error&&t.error()}})},getGroupListByType:function(t,o){var s=["SELLING","BEFORE_BEGIN"];u["a"].getGoodsList({data:{type:s[t],page:1,size:10},success:function(t){var s=t.groupGoodsList||[];o&&o(s)}})},gotoGroupListShare:function(t,o){u["a"].gotoListShare(t,o)},getComminssionData:function(t){var o=this,s=o._getDate(t.index||0),a="/app/auth/shop/getIndexStatistics.do";r["a"].ajax({data:s,api_versions:"v2",url:a,success:function(s){var a=o.transCommission(s.object);t.cb&&t.cb(a)}})}},p=s("daa7"),d=s("6abe"),m=s("390f"),g=s("fc32"),f=s("7870"),v=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"jump-line",on:{click:t.jump}},[s("p",[s("label",{staticClass:"title"},[t._v(t._s(t.data.title))]),s("i",{staticClass:"jump-icon"})])])},_=[],h={name:"JumpLine",props:{data:Object},methods:{jump:function(){var t=this;t.data.url?n["a"].openView(t.data.url,t.data.pageParam||{customNavigationBar:{}}):n["a"].toast("页面路径为空！")}}},w=h,b=(s("8475"),s("2877")),L=Object(b["a"])(w,v,_,!1,null,"1d18e572",null),C=L.exports,G=s("fef2"),y=s("2d44"),P=s("e88e"),x={name:"shop_index",components:{SelectTab:g["a"],Commission:f["a"],JumpLine:C,List:d["a"],GoodsItem:m["a"],CountDown:G["a"],LoadMore:y["a"],ProgressBar:P["a"]},created:function(){var t=this;t.update()},mounted:function(){var t=this;n["a"].startRefresh({config:{bgColor:"rgb(18,149,216)"},callback:function(){t.update()}})},data:function(){return{page:1,index:0,tabs:[{name:"今日"},{name:"昨日"},{name:"本月"}],groupListPageData:{title:"正在拼团",url:"views/shop/group_goods_list",pageParam:{customNavigationBar:{title:"拼团商品",url:"views/shop/group_goods_list/header_frame"}}},commissionData:{total:{},group:{},normal:{}},groupGoodsList:[],goodsList:[],sellingList:[[],[]]}},methods:{getGroupLists:function(){var t=this;l.getGroupListByType(0,function(o){t.sellingList[0]=o||[]}),l.getGroupListByType(1,function(o){t.sellingList[1]=o||[]})},openPage:function(t){l.openPage(t)},openMoreDataPage:function(){var t=this;n["a"].openView("views/shop/more_data",{param:{commissionData:t.commissionData,index:t.index},customNavigationBar:{url:"views/shop/more_data/header_frame"}})},openAllOrderPage:function(){n["a"].openView("views/shop/group_order",{customNavigationBar:{url:"views/shop/group_order/header_frame"}})},openGroupGoodsList:function(t){var o=this.sellingList[t];l.gotoGroupListShare(t,o)},openGoodsDetailPage:function(t){n["a"].openView("views/shop/spread_goods",{param:{goodsId:t.goodsId},customNavigationBar:{title:"商品详情"}})},openGroupGoodsDetailPage:function(t){n["a"].openView("views/shop/group_goods",{param:{goodsId:t.goodsId,actId:t.actId,active_status:0},customNavigationBar:{title:"商品详情"}})},getGoodsList:function(t){var o=this,s=this,a=10;l.getGoodsList({data:{page:s.page,size:a},success:function(e){1==s.page?(s.groupGoodsList=e.groupGoodsList,s.goodsList=e.goodsList):s.goodsList=s.goodsList.concat(e.goodsList),e.goodsList&&e.goodsList.length===a?o.$refs.scroll.loaded():o.$refs.scroll.complete(),s.page+=1,t&&t()},error:function(){o.$refs.scroll.loaded(),t&&t()}})},getComminssionData:function(t){var o=this;(t||0==t)&&(o.index=t),l.getComminssionData({index:o.index,cb:function(t){o.commissionData=t}})},update:function(){var t=this;t.$refs.scroll&&t.$refs.scroll.init(),t.page=1,p["a"].updateGuideStaffInfo(),t.groupGoodsList=[],t.goodsList=[],t.getComminssionData(),t.getGoodsList(),t.getGroupLists()}}},S=x,D=(s("e122"),Object(b["a"])(S,e,i,!1,null,"43e854c0",null)),N=D.exports,O=s("d8ac");a["a"].config.productionTip=!1,O["a"].start(a["a"]),window.EventBus=new a["a"],window.isPc()?(console.log("pc"),new a["a"]({render:function(t){return t(N)},data:{Bus:new a["a"]}}).$mount("#app")):(console.log("移动端"),window.apiready=function(){new a["a"]({render:function(t){return t(N)}}).$mount("#app")})},e122:function(t,o,s){"use strict";var a=s("46f7"),e=s.n(a);e.a}});